#!/bin/bash

chemin=$PWD
installation=/home/jluc/rhizome/mvc

if  test $1 = "cree" 
then
if [ -f .racine ]
then
case $2 in
"modele")
echo "création d'un modele: $chemin/app/modele/modele_$3.rb"
echo $installation/modeles/modele_debut.rb
nom=modele;;

"controleur")
echo "création d'un controleur: $chemin/app/controleur/controleur_$3.rb" 
nom=controleur;;

"action")
echo "ajout d'une action: $chemin/app/action/action_$3.rb"
nom=action;;

"vue")
echo "création d'une vue: $chemin/app/vue/vue_$3.rb"
nom=vue;;

*)
echo 'erreur de commande';;
esac
sed s/"<nom-$nom>"/"$nom_$3"/g $installation/modeles/$nom.rb >> $chemin/app/$nom/$nom_$3.rb
else
echo 'vous devez etre a la racine de votre projet pour executer cette commande'
fi

else

	case $1 in
	"init")
		echo "création de l'arborescence" 
		mkdir $2 $2/lib $2/test $2/scripts $2/app $2/modeles $2/app/vue $2/app/controleur $2/app/modele $2/app/action
		touch $2/.racine;;
	*)
		echo 'aide de commande';;

esac
fi

